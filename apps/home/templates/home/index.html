{% extends "base.html" %}
{% load static %}
{% load tz %}
{% block title %}Home{% endblock %}

{% block extra_css %}
    <style>
        .hero .sign-up-form input[type=email] {
            background-color: transparent;
            border: 0;
            padding: 4px 10px;
            width: 100%;

        }

        .img-fluid {
            height: 100%;
            width: 100%;
            object-fit: cover;
            object-position: center;
        }

        .btn-primary-custom {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .btn-primary-custom:hover {
            background-color: transparent;
            color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .btn-primary-custom:hover .spinner-border {
            color: var(--primary-color) !important;
        }
    </style>
{% endblock %}

{% block content %}
    <main id="main">
        <section id="hero" class="hero">
            {% if website_meta.home_banner %}
                <img src="{{ website_meta.home_banner.url }}" alt="Home Hero Image" data-aos="fade-in"/>
            {% else %}
                <img src="{% static 'assets/img/hero-bg.jpg' %}" alt="Home Hero Image" data-aos="fade-in"/>
            {% endif %}
            <div class="container">
                <div class="row">
                    <div class="col-lg-10">
                        {% if website_meta.title %}
                            <h2 data-aos="fade-up" data-aos-delay="100">{{ website_meta.title }}</h2>
                        {% else %}
                            <h2 data-aos="fade-up" data-aos-delay="100">Welcome to Our Website</h2>
                        {% endif %}

                        {% if website_meta.description %}
                            <p data-aos="fade-up" data-aos-delay="200">
                                {{ website_meta.description }}
                            </p>
                        {% else %}
                            <p data-aos="fade-up" data-aos-delay="200">
                                We, as motivated youths, in a journey to empower other competent youths through
                                education, industry connections, innovation, and community outreach, ensuring lasting
                                impact and inclusivity.
                            </p>
                        {% endif %}
                    </div>
                    <div class="col-lg-5 aos-init aos-animate" data-aos="fade-up" data-aos-delay="300">
                        {% if request.session.is_subscribed == None %}
                            <form action="{% url 'home:home' %}" method="post" class="php-email-form"
                                  id="subscribe_form">
                                {% csrf_token %}
                                <div class="sign-up-form">
                                    {{ subscribe_form.email }}
                                    <input name="form_type" type="hidden" value="newsletter"/>
                                    <button type="submit" class="btn btn-primary btn-primary-custom">
                                        <span class="text">Subscribe</span>
                                        <div class="spinner-border text-light d-none" role="status">
                                            <span class="visually-hidden">Loading...</span>
                                        </div>
                                    </button>
                                </div>
                                <div class="error-message"></div>

                                <div class="sent-message"></div>
                            </form>
                        {% endif %}
                    </div>
                </div>
            </div>
        </section>

        <section id="clients" class="clients">
            <div class="container-fluid" data-aos="fade-up">
                <div class="container section-title" data-aos="fade-up">
                    <h2>Collaborations</h2>
                    <p>Our Collaborations</p>
                </div>
                <div class="row gy-4">
                    {% for collab in collabs %}
                        <div class="col-xl-2 col-md-3 col-6 client-logo">
                            <img src="{{ collab.image.url }}" class="img-fluid" alt="">
                        </div>
                    {% endfor %}
                </div>
            </div>
        </section>

        <section id="about" class="about">
            <div class="container" data-aos="fade-up" data-aos-delay="100">
                <div class="row align-items-xl-center gy-5">
                    <div class="col-xl-5 content">
                        <h3>About Us</h3>
                        <h2>We are the team of Dedicated individuals</h2>
                        <p>
                            We, a dedicated team in Nepal, are committed to advancing tech welfare and industry
                            awareness. We aim to create positive change and shape a brighter, more informed future for
                            all.
                        </p>
                    </div>

                    <div class="col-xl-7">
                        <div class="row gy-4 icon-boxes">
                            {% for goal in goals %}
                                <div class="col-md-6" data-aos="fade-up" data-aos-delay="200">
                                    <div class="icon-box">
                                        <i class="{{ goal.icon }}"></i>
                                        <h3>{{ goal.title }}</h3>
                                        <p>
                                            {{ goal.content }}
                                        </p>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="services" class="services">
            <div class="container section-title" data-aos="fade-up">
                <h2>Programs</h2>
                <p>Our programs are meticulously crafted to empower the youth with the knowledge, skills, and
                    perspectives needed to thrive in an ever-evolving world.</p>
            </div>

            <div class="container">
                <div class="row gy-4">
                    {% for program in programs %}
                        <div class="col-lg-6 " data-aos="fade-up" data-aos-delay="100">
                            <div class="service-item d-flex">
                                <div class="icon flex-shrink-0"><i class="{{ program.icon }}"></i></div>
                                <div>
                                    <h4 class="title"><a class="stretched-link">{{ program.title }}</a></h4>
                                    <p class="description">{{ program.content }}</p>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </section>

        {% if features %}
            <section id="features" class="features">
                <div class="container section-title" data-aos="fade-up">
                    <h2>Features</h2>
                    <p> The Visionarys Nepal's features encapsulate a commitment to holistic education, community
                        building, and
                        adaptability in the realms of cybersecurity and technology.</p>
                </div>
                <div class="container">
                    {% for feature in features %}
                        {% if feature.feature_images_count > 1 %}
                            <div class="row gy-4 align-items-center features-item">
                                <div class="col-lg-5 order-2 order-lg-1 aos-init aos-animate" data-aos="fade-up"
                                     data-aos-delay="200">
                                    <h3>{{ feature.title }}</h3>
                                    <p>
                                        {{ feature.description }}
                                    </p>
                                    <a href="https://docs.google.com/forms/d/e/1FAIpQLScmpMB42pBP4IoAUgCsFOpCxNge3X4wZXqVjPJyyvzFlGNoww/viewform?usp=sf_link"
                                       class="btn btn-get-started">Get Started</a>
                                </div>
                                <div class="col-lg-7 order-1 order-lg-2 d-flex align-items-center aos-init aos-animate"
                                     data-aos="zoom-out" data-aos-delay="100">
                                    <div class="image-stack">
                                        <img src="{{ feature.feature_images.all.0.image.url }}" alt=""
                                             class="stack-front">
                                        <img src="{{ feature.feature_images.all.1.image.url }}" alt=""
                                             class="stack-back">
                                    </div>
                                </div>
                            </div>
                        {% endif %}
                        {% if feature.feature_images_count < 2 %}
                            <div class="row gy-4 align-items-stretch justify-content-between features-item ">
                                {% for feature_image in feature.feature_images.all %}
                                    <div class="col-lg-6 d-flex align-items-center features-img-bg aos-init aos-animate"
                                         data-aos="zoom-out">
                                        <img src="{{ feature_image.image.url }}" style="object-position: unset;"
                                             class="img-fluid" alt="{{ feature_image.title }}">
                                    </div>
                                {% endfor %}

                                <div class="col-lg-5 d-flex justify-content-center flex-column aos-init aos-animate"
                                     data-aos="fade-up">
                                    <h3>{{ feature.title }}</h3>
                                    <p>{{ feature.description }}</p>
                                    <ul>
                                        <li><i class="bi bi-check"></i> <span>Helps People Stay Informed.</span>
                                        </li>
                                        <li>
                                            <i class="bi bi-check"></i><span> Provides Clear Event Details</span>
                                        </li>
                                        <li><i class="bi bi-check"></i> <span>Makes Finding Events Simple</span>.
                                        </li>
                                    </ul>
                                    <a href="https://docs.google.com/forms/d/e/1FAIpQLScmpMB42pBP4IoAUgCsFOpCxNge3X4wZXqVjPJyyvzFlGNoww/viewform?usp=sf_link"
                                       class="btn btn-get-started align-self-start">Get Started</a>
                                </div>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </section>
        {% endif %}

        {% if highlights %}
            <section id="portfolio" class="portfolio">
                <div class="container section-title" data-aos="fade-up">
                    <h2>Highlights</h2>
                    <p>These highlights showcase our commitment to excellence, inclusivity, and adaptability, making
                        TVN a
                        beacon
                        for positive change in the lives of the youth and the communities we serve.</p>
                </div>
                <div class="container">
                    <div class="isotope-layout" data-default-filter="*" data-layout="masonry"
                         data-sort="original-order">
                        <ul class="portfolio-filters isotope-filters" data-aos="fade-up" data-aos-delay="100">
                            <li data-filter="*" class="filter-active">All</li>

                            {% for location in event_locations %}
                                <li data-filter=".filter-{{ location|slugify }}">{{ location }}</li>
                            {% endfor %}
                        </ul>
                        <div class="row gy-4 isotope-container" data-aos="fade-up" data-aos-delay="200">
                            {% for highlight in highlights %}
                                <div class="col-lg-4 col-md-6 portfolio-item isotope-item filter-{{ highlight.event.location|slugify }}">
                                    <img src="{{ highlight.image.url }}" class="img-fluid" alt="">
                                    <div class="portfolio-info">
                                        <h4>{{ highlight.title }}</h4>
                                        <p>{{ highlight.event.title }}</p>
                                        <a href="{{ highlight.image.url }}"></a>
                                        <a href="" title="More Details" class="details-link">
                                            <i class="bi bi-link-45deg"></i></a>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </section>
        {% endif %}

        <section id="vision" class="vision">
            <div class="container section-title" data-aos="fade-up">
                <h2>The Vision</h2>
                <p>In the world of bits and bytes, we're building a community of endless possibilities. Welcome to The
                    Visionarys Nepal.</p>
            </div>
        </section>

        <section id="faq" class="faq">
            <div class="container">
                <div class="row gy-4">
                    <div class="col-lg-4" data-aos="fade-up" data-aos-delay="100">
                        <div class="content px-xl-5">
                            <h3><span>Frequently Asked </span><strong>Questions</strong></h3>
                            <p>
                                These are the frequently asked questions that The Visionarys Nepal often receives,
                                providing valuable
                                insights into various aspects of the organization
                            </p>
                        </div>
                    </div>

                    <div class="col-lg-8" data-aos="fade-up" data-aos-delay="200">
                        <div class="faq-container">
                            <div class="faq-item faq-active">
                                <h3><span class="num">1.</span>
                                    <span>What is the mission of The Visionarys Nepal?</span></h3>
                                <div class="faq-content">
                                    <p>The Visionarys Nepal is dedicated to empowering and enlightening the youth by
                                        addressing various
                                        aspects of personal development, awareness, and societal issues.</p>
                                </div>
                                <i class="faq-toggle bi bi-chevron-right"></i>
                            </div>

                            <div class="faq-item">
                                <h3><span class="num">2.</span>
                                    <span>How can I become a member of The Visionarys Nepal?</span></h3>
                                <div class="faq-content">
                                    <p>Membership in The Visionarys Nepal is open to all youth who share a passion for
                                        personal
                                        development and community service. You can join by participating in our events
                                        and reaching out to
                                        our leadership team.</p>
                                </div>
                                <i class="faq-toggle bi bi-chevron-right"></i>
                            </div>

                            <div class="faq-item">
                                <h3><span class="num">3.</span> <span>Is The Visionarys Nepal only focused on academic
                                    development?</span></h3>
                                <div class="faq-content">
                                    <p>No, The Visionarys Nepal takes a holistic approach, addressing not only academic
                                        needs but also
                                        mental health, career guidance, and social awareness to create well-rounded
                                        individuals.</p>
                                </div>
                                <i class="faq-toggle bi bi-chevron-right"></i>
                            </div>

                            <div class="faq-item">
                                <h3><span class="num">4.</span> <span>How does The Visionarys Nepal assess the impact of its
                                    programs?</span></h3>
                                <div class="faq-content">
                                    <p>The Visionarys Nepal uses a data-driven approach, collecting feedback from
                                        participants and
                                        tracking their progress over time to measure the impact of its programs.</p>
                                </div>
                                <i class="faq-toggle bi bi-chevron-right"></i>
                            </div>

                            <div class="faq-item">
                                <h3><span class="num">5.</span> <span>What types of programs does The Visionarys Nepal
                                    organize?</span></h3>
                                <div class="faq-content">
                                    <p>The Visionarys Nepal organizes a range of programs, including mental health
                                        awareness, career
                                        guidance, financial literacy, social issue discussions, tutoring programs, and
                                        community
                                        engagement initiatives.</p>
                                </div>
                                <i class="faq-toggle bi bi-chevron-right"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="team" class="team">
            <div class="container section-title" data-aos="fade-up">
                <h2>Team</h2>
                <p>The Visionarys Nepal team is a tight-knit group of tech enthusiasts who share a deep passion for
                    cybersecurity and technology, combining their diverse experiences to make learning accessible and
                    engaging
                    for all.</p>
            </div>

            <div class="container">
                <div class="row gy-5">
                    {% for member in members %}
                        <div class="col-lg-4 col-md-6 member" data-aos="fade-up" data-aos-delay="100">
                            <div class="member-img" style="height: 256px; width: 256px;">
                                {% with profile_img=member.profile.profile_image %}
                                    <img src="{% if profile_img %}{{ profile_img.url }}{% else %}{% static 'assets/img/profile.svg' %}{% endif %}"
                                         class="img-fluid object-fit-cover" alt="{{ member.name }}"/>
                                {% endwith %}

                                <div class="social">
                                    {% for link in member.member_socials.all %}
                                        <a href="{{ link.link_url }}">
                                            <i class="{{ link.icon.icon }}"></i>
                                        </a>
                                    {% endfor %}
                                </div>
                            </div>
                            <div class="member-info text-center">
                                <h4><a href="{% url 'team:team' member.profile.slug %}">{{ member.name }}</a></h4>
                                <span>{{ member.designation }}</span>
                                <p>{{ member.description }}</p>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </section>

        <section id="call-to-action" class="call-to-action">

            <img src="{% static 'assets/img/cta_bg.jpg' %}" alt="Call To Action"/>

            <div class="container">
                <div class="row justify-content-center" data-aos="zoom-in" data-aos-delay="100">
                    <div class="col-xl-10">
                        <div class="text-center">
                            <h3>Call To Action</h3>
                            <p>Join The Visionarys Nepal! Embrace your passion for cybersecurity and technology. Be part
                                of a dynamic community, shaping the future together. Become a member now!</p>
                            <a class="cta-btn"
                               href="https://docs.google.com/forms/d/e/1FAIpQLScmpMB42pBP4IoAUgCsFOpCxNge3X4wZXqVjPJyyvzFlGNoww/viewform?usp=sf_link"
                               target="_blank">Call To Action</a>
                        </div>
                    </div>
                </div>
            </div>

        </section>

        <section id="testimonials" class="testimonials">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-5 info" data-aos="fade-up" data-aos-delay="100">
                        <h3>Voices of Our Community</h3>
                        <p>
                            In the vibrant tapestry of The Visionarys Nepal, members weave together a narrative of
                            shared passion and collective growth. Hear directly from our community.
                        </p>
                    </div>

                    <div class="col-lg-7" data-aos="fade-up" data-aos-delay="200">
                        <div class="swiper">
                            <template class="swiper-config">
                                {
                                "loop": true,
                                "speed" : 600,
                                "autoplay": {
                                "delay": 5000
                                },
                                "slidesPerView": "auto",
                                "pagination": {
                                "el": ".swiper-pagination",
                                "type": "bullets",
                                "clickable": true
                                }
                                }
                            </template>
                            <div class="swiper-wrapper">
                                {% for feedback in feedbacks %}
                                    <div class="swiper-slide">
                                        <div class="testimonial-item">
                                            <div class="d-flex align-items-center">
                                                {% if feedback.profile_img %}
                                                    <img src="{{ feedback.profile_img.url }}"
                                                         class="testimonial-img flex-shrink-0"
                                                         alt="{{ feedbacks.name }}"/>
                                                {% else %}
                                                    <img class="testimonial-img flex-shrink-0"
                                                         src="{% static 'assets/img/profile.png' %}"
                                                         alt="Profile Image"/>
                                                {% endif %}

                                                <div>
                                                    <h3>{{ feedback.name }}</h3>
                                                    <h4>{{ feedback.title }}</h4>
                                                </div>
                                            </div>
                                            <p>
                                                <i class="bi bi-quote quote-icon-left"></i>
                                                <span>{{ feedback.quote }}</span>
                                                <i class="bi bi-quote quote-icon-right"></i>
                                            </p>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                            <div class="swiper-pagination"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        {% if top_blogs %}
            <section id="blogs" class="recent-posts">
                <div class="container section-title" data-aos="fade-up">
                    <h2>Top Posts</h2>
                    <p>Here are the most viewed posts of The Visionarys Nepal.</p>
                </div>
                <div class="container">
                    <div class="row gy-4">
                        {% for blog in top_blogs %}
                            {% include "blog/includes/blog_card.html" with blog=blog %}
                        {% endfor %}
                    </div>
                </div>
            </section>
        {% endif %}

        {% if recent_blogs %}
            <section id="blogs" class="recent-posts">
                <div class="container section-title" data-aos="fade-up">
                    <h2>Recent Posts</h2>
                    <p>Stay updated with the latest insights, events, and news from The Visionarys Nepal community.</p>
                </div>
                <div class="container">
                    <div class="row gy-4">
                        {% for blog in recent_blogs %}
                            {% include "blog/includes/blog_card.html" with blog=blog %}
                        {% endfor %}
                    </div>
                </div>
            </section>
        {% endif %}

        <!-- Place <div> tag where you want the feed to appear -->
        <div id="curator-feed-default-feed-layout">
        </div>


        <section id="contact" class="contact">
            <div class="container section-title" data-aos="fade-up">
                <h2>Contact</h2>
                <p>Have questions, suggestions, or just eager to be part of The Visionarys Nepal? Reach out to us! We're
                    here
                    to chat and welcome your insights.</p>
            </div>
            <div class="container" data-aos="fade-up" data-aos-delay="100">
                <div class="row gy-4">
                    <div class="col-lg-6">
                        <div class="row gy-4">
                            <div class="col-md-6">
                                <div class="info-item" data-aos="fade" data-aos-delay="200">
                                    <i class="bi bi-geo-alt"></i>
                                    <h3>Address</h3>
                                    <p>Seshmati Bridge, Tarakeshwar 44600</p>
                                    <p>Nepal</p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="info-item" data-aos="fade" data-aos-delay="300">
                                    <i class="bi bi-telephone"></i>
                                    <h3>Call Us</h3>
                                    <p>+977 9761849725</p>
                                    <p>+977 9823558350</p>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="info-item" data-aos="fade" data-aos-delay="400">
                                    <i class="bi bi-envelope"></i>
                                    <h3>Email Us</h3>
                                    <p>thevisionarynepal@gmail.com</p>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="info-item" data-aos="fade" data-aos-delay="500">
                                    <i class="bi bi-clock"></i>
                                    <h3>Open Hours</h3>
                                    <p>Sunday - Friday</p>
                                    <p>9:00AM - 05:00PM</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6">
                        {% include 'contact/includes/contact_form.html' with form=contact_form %}
                    </div>
                </div>
            </div>
        </section>
    </main>
{% endblock %}

{% block extra_js %}
    <!-- Curator -->
    <!-- The Javascript can be moved to the end of the html page before the </body> tag -->
    <script type="text/javascript">
        /* curator-feed-default-feed-layout */
        (function () {
            let i, e, d = document, s = "script";
            i = d.createElement("script");
            i.async = 1;
            i.charset = "UTF-8";
            i.src = "https://cdn.curator.io/published/d6201e47-6845-4145-962b-78f0cbf3b424.js";
            e = d.getElementsByTagName(s)[0];
            e.parentNode.insertBefore(i, e);
        })();

        const contact_form = document.querySelector("#contact-form");
        const loading_div = contact_form.querySelector(".loading");
        const error_div = contact_form.querySelector(".error-message");
        const success_div = contact_form.querySelector(".sent-message");

        async function onSubmit(token) {
            loading_div.classList.add("d-block");
            error_div.classList.remove("d-block");
            success_div.classList.remove("d-block");

            const fields = contact_form.querySelectorAll("input:not([type=hidden]), textarea");
            let is_valid = true;

            fields.forEach(field => {
                let is_field_valid = field.value.trim() !== "";

                if (field.type === "email") {
                    is_field_valid = validate_email(field);
                }

                toggleValidationClass(field, is_field_valid);
                if (!is_field_valid) {
                    is_valid = false;
                }
            });

            if (!is_valid) {
                loading_div.classList.remove("d-block");
                return;
            }

            const form_data = new FormData(contact_form);
            form_data.append("g-recaptcha-response", token);

            try {
                const csrfToken = document.querySelector("[name=csrfmiddlewaretoken]").value;
                const response = await fetch("/", {
                    method: "POST",
                    headers: {
                        "X-CSRFToken": csrfToken,
                    },
                    body: form_data
                });

                const data = await response.json();

                loading_div.classList.remove("d-block");

                if (response.ok) {
                    success_div.innerHTML = data.message;
                    success_div.classList.add("d-block");
                    contact_form.reset();

                    fields.forEach(field => {
                        field.classList.remove("is-valid");
                    });

                    setTimeout(function () {
                        success_div.classList.remove("d-block");
                    }, 1500);
                } else {
                    error_div.innerHTML = data.error || "Unable to send message";
                    error_div.classList.add("d-block");
                    setTimeout(function () {
                        error_div.classList.remove("d-block");
                    }, 1500);
                }
            } catch (e) {
                loading_div.classList.remove("d-block");
                error_div.classList.add("d-block");
                error_div.innerHTML = "Unable to send message. Please try again.";
                setTimeout(function () {
                    error_div.classList.remove("d-block");
                }, 1500);
                console.error(e);
            }
        }

        const subscribe_form = document.querySelector("#subscribe_form");
        subscribe_form.addEventListener("submit", function (e) {
            e.preventDefault();
            e.stopPropagation();

            const email = subscribe_form.email;
            const subscribeBtn = subscribe_form.querySelector("button.btn-primary-custom");
            const sent_message = subscribe_form.querySelector(".sent-message");
            const error_div = subscribe_form.querySelector(".error-message");
            const signUpForm = subscribe_form.querySelector(".sign-up-form");

            email.classList.remove("is-invalid");

            let is_valid = email.value.trim() !== "" && validate_email(email);

            if (!is_valid) {
                email.classList.add("is-invalid");
                return;
            }

            subscribeBtn.querySelector(".text").classList.add("d-none");
            subscribeBtn.querySelector(".spinner-border").classList.remove("d-none");

            const formData = new FormData(subscribe_form);
            const csrfToken = document.querySelector("[name=csrfmiddlewaretoken]").value;


            if (is_valid) {
                subscribeBtn.querySelector(".text").classList.add("d-none");
                subscribeBtn.querySelector(".spinner-border").classList.remove("d-none");

                const formData = new FormData(subscribe_form);

                sendSubscriptionRequest(subscribe_form.action, formData, csrfToken).then(data => {
                    sent_message.innerHTML = data.message;
                    sent_message.style.display = "block";
                    if (signUpForm) signUpForm.classList.add("d-none");

                    return delay(3000);
                }).then(() => {
                    sent_message.style.display = "none";
                }).catch(error => {
                    error_div.innerHTML = error.message;
                    error_div.style.display = "block";

                    return delay(3000);
                }).then(() => {
                    error_div.style.display = "none";
                }).finally(() => {
                    subscribeBtn.querySelector(".text").classList.remove("d-none");
                    subscribeBtn.querySelector(".spinner-border").classList.add("d-none");
                });

            } else {
                email.classList.add("is-invalid");
            }
        });

        function sendSubscriptionRequest(url, formData, csrfToken) {
            return fetch(url, {
                headers: {"X-CSRFToken": csrfToken},
                method: "POST",
                body: formData
            }).then(response => {
                return response.json().then(data => {
                    if (!response.ok) {
                        throw new Error(data.error || "Error subscribing to newsletter");
                    }
                    return data;
                });
            });
        }

        function delay(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }


        function toggleValidationClass(field, value) {
            if (value) {
                field.classList.add("is-valid");
                field.classList.remove("is-invalid");
            } else {
                field.classList.add("is-invalid");
                field.classList.remove("is-valid");
            }
        }
    </script>
{% endblock %}
