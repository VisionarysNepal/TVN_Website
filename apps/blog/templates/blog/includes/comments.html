<h4 class="comments-count">{{ post.total_comments }} Comment{{ post.total_comments|pluralize }}</h4>
{% for comment in post.comments.all %}
    {% if not comment.parent %}
        <div id="comment-{{ comment.id }}" class="comment">
            <div class="d-flex">
                <div class="comment-img">
                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg"
                         viewBox="0 0 32 32">
                        <circle style="fill:none;stroke:#000000;stroke-width:2;" cx="16"
                                cy="12" r="6"/>
                        <path style="fill:none;stroke:#000000;stroke-width:2;"
                              d="M7,27c0-4.971,4.029-9,9-9s9,4.029,9,9"/>
                    </svg>
                </div>

                <div>
                    <h5>
                        <span class="bold">{{ comment.user_name }}</span>
                        <span class="bold cursor-pointer"
                              onclick="toggleDiv(this)">
                            <i class="bi bi-reply-fill"></i> Reply
                        </span>
                    </h5>
                    <time>{{ comment.date|date }}</time>
                    <p>{{ comment.content }}</p>
                    {% include "blog/includes/comment_form.html" with comment=comment %}
                </div>
            </div>

            {% if comment.replies.exists %}
                <button class="btn btn-link toggle-replies-btn"
                        onclick="toggleComments(this, 'replies-{{ comment.id }}', {{ comment.replies.count }})">
                    View Replies ({{ comment.replies.count }})
                </button>

                <div id="replies-{{ comment.id }}" class="comment-replies"
                     style="display: none;">
                    {% include "blog/includes/comment_replies.html" with replies=comment.replies.all %}
                </div>
            {% endif %}
        </div>
    {% endif %}
{% endfor %}
