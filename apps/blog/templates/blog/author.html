{% extends "base.html" %}
{% load static %}

{% block title %}{{ author.profile.get_name }}{% endblock title %}
{% load tz %}

{% block content %}
    <style>
        .cursor-pointer {
            cursor: pointer;
        }

        .meta-li {
            color: rgba(var(--default-color-rgb), 0.6);
            font-size: 14px;
            display: inline-block;
            line-height: 1;
            cursor: default;
        }

        .img-fluid {
            height: 100%;
            width: 100%;
            object-fit: cover;
            object-position: top;
        }

        .recent-posts .post-img {
            max-height: 180px;
        }
    </style>
    <main id="main">
        <div data-aos="fade" class="page-title">
            <div class="heading">
                <div class="container">
                    <div class="row d-flex justify-content-center text-center">
                        <div class="col-lg-8">
                            <h1>{{ author.profile.get_name }}</h1>
                            <p class="mb-0">{{ author.profile.bio }}</p>
                        </div>
                    </div>
                </div>
            </div>
            <nav class="breadcrumbs">
                <div class="container">
                    <ol>
                        <li><a href="{% url "home:home" %}">Home</a></li>
                        <li><a href="{% url "blog:blogs" %}">Blogs</a></li>
                        <li class="current">{{ author.profile.get_name }}</li>
                    </ol>
                </div>
            </nav>
        </div>

        <section id="blog-details" class="blog-details">

            <div class="container" data-aos="fade-up" data-aos-delay="100">

                <div class="row g-5">

                    <div class="col-lg-9">
                        <section id="blogs" class="recent-posts">
                            <div class="container section-title" data-aos="fade-up">
                                <h2>Top Posts</h2>
                                <p>Here are the most viewed posts of {{ author.profile.get_name }}.</p>
                            </div>
                            <div class="container">
                                <div class="row gy-4">
                                    {% for blog in top_blogs %}
                                        {% include "blog/includes/blog_card.html" with blog=blog %}
                                    {% empty %}
                                        <p>There are no posts</p>
                                    {% endfor %}
                                </div>
                            </div>

                        </section>

                        <section id="blogs" class="recent-posts">
                            <div class="container section-title" data-aos="fade-up">
                                <h2>Recent Posts</h2>
                                <p>Here are the most recent blogs from {{ author.profile.get_name }}</p>
                            </div>
                            <div class="container">
                                <div class="row gy-4">
                                    {% for blog in recent_blogs %}
                                        {% include "blog/includes/blog_card.html" with blog=blog %}
                                    {% empty %}
                                        <p>There are no posts</p>
                                    {% endfor %}
                                </div>
                            </div>

                        </section>

                    </div>

                    <div class="col-lg-3">
                        <div class="sidebar">
                            <div class="sidebar-item recent-posts">
                                <h3 class="sidebar-title">Top Authors</h3>

                                {% for author in top_authors %}
                                    <div class="post-item">
                                        {% if author.profile.profile_image %}
                                            <img src="{{ author.profile.profile_image.url }}"
                                                 alt="{{ author.get_full_name }}" class="flex-shrink-0">
                                        {% else %}
                                            <img src="{% static 'assets/img/profile.svg' %}" alt="{{ Author }}"
                                                 class="flex-shrink-0"/>
                                        {% endif %}
                                        <div>
                                            <h4>
                                                <a href="{% url "blog:author" author.profile.slug %}">{{ author.profile.get_name }}</a>
                                            </h4>
                                        </div>
                                    </div><!-- End recent post item-->
                                {% endfor %}
                            </div><!-- End sidebar recent posts-->
                        </div><!-- End Sidebar -->
                    </div>

                </div>

            </div>

        </section><!-- End Blog-details Section -->
    </main>
{% endblock content %}
